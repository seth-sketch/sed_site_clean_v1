<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Make Projects â€” Helper</title>
  <link rel="stylesheet" href="assets/styles.css">
  <style>
    pre{white-space:pre-wrap;background:#111;color:#fff;padding:12px;border-radius:8px}
    .ok{color:#15803d}.warn{color:#b45309}.bad{color:#991b1b}
  </style>
</head>
<body class="container">
  <h1>Projects helper</h1>
  <p>This page reads <code>assets/work.json</code> and checks for expected files.</p>
  <div id="out"></div>

<script>
(function(){
  var out = document.getElementById('out');
  function line(html){ var d=document.createElement('div'); d.innerHTML=html; out.appendChild(d); }
  fetch('assets/work.json?v='+Date.now()).then(r=>r.json()).then(list=>{
    list.forEach(function(p){
      var need = [p.cover].concat((p.gallery||[]));
      line('<h3>'+p.slug+'</h3>');
      need.forEach(function(src){
        if (!src) return;
        var img = new Image();
        img.onload = function(){ line('<div class="ok">OK '+src+'</div>'); };
        img.onerror = function(){ line('<div class="bad">Missing '+src+'</div>'); };
        img.src = src + '?v=' + Date.now();
      });
    });
  }).catch(()=>line('<div class="bad">Could not read assets/work.json</div>'));
})();
</script>
</body>
</html>
